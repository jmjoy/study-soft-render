# 软件渲染学习项目

这个项目包含了多个软件渲染示例，从基础的2D光栅化到高级的3D渲染技术。

这些示例除了窗口一点骨架代码外，全都使用`Claude Sonnet 4`生成，用于学习渲染原理。

## 示例列表

### 基础示例

- `rasterizer_2d.rs` - 2D光栅化基础
- `rasterizer_3d.rs` - 3D光栅化基础

### 高级示例

- `texture_mapping.rs` - 纹理映射
- `lighting.rs` - 光照计算（Blinn-Phong）
- `advanced_rendering.rs` - 综合高级渲染（纹理+光照+法线贴图）
- `post_processing.rs` - 后处理效果
- `volume_particles.rs` - 体积渲染与粒子系统

## 运行示例

### 纹理映射示例

```bash
cargo run --bin texture_mapping --release
```

这个示例展示了：

- 双线性纹理过滤
- 透视正确的纹理映射
- 旋转的纹理立方体
- 棋盘格纹理生成

### 光照计算示例

```bash
cargo run --bin lighting --release
```

这个示例展示了：

- Blinn-Phong光照模型
- 环境光、漫反射、镜面反射
- 多光源支持
- 不同材质（金、银、翡翠）
- 动态光源和相机

### 高级渲染示例

```bash
cargo run --bin advanced_rendering --release
```

这个示例展示了：

- 纹理映射 + 光照计算
- 法线贴图（Normal Mapping）
- TBN矩阵变换
- 程序化纹理生成
- 复杂的材质系统

### 体积渲染与粒子系统示例

```bash
cargo run --bin volume_particles --release
```

这个示例展示了：

- 体积渲染（Volume Rendering）
- 光线投射（Ray Casting）
- 粒子系统（Particle System）
- 物理模拟（重力、速度）
- 动态体积数据
- Alpha混合

### 后处理效果示例

```bash
cargo run --bin post_processing --release
```

这个示例展示了：

- 多种后处理效果（按空格键切换）
- 模糊（Blur）
- 边缘检测（Edge Detection）
- 浮雕效果（Emboss）
- 锐化（Sharpen）
- 辉光效果（Bloom）
- 复古效果（Vintage）
- 晕影效果（Vignette）
- 卷积核滤波

## 技术特点

### 纹理映射

- **双线性过滤**: 平滑的纹理采样
- **透视校正**: 正确的纹理坐标插值
- **程序化纹理**: 运行时生成的纹理图案

### 光照计算

- **Blinn-Phong模型**: 经典的光照算法
- **多光源支持**: 支持任意数量的光源
- **材质系统**: 环境光、漫反射、镜面反射参数

### 高级渲染

- **法线贴图**: 增加表面细节的视觉效果
- **切线空间**: 正确的法线变换
- **综合渲染**: 纹理、光照、法线贴图的结合

### 体积渲染

- **光线投射**: 从3D体积数据中提取表面
- **体积纹理**: 3D纹理数据的采样
- **粒子系统**: 动态粒子的生成与渲染
- **物理模拟**: 基于物理的运动和交互

### 后处理效果

- **模糊**: 软化图像细节
- **边缘检测**: 提取图像边缘
- **浮雕效果**: 产生立体浮雕感
- **锐化**: 增强图像细节
- **辉光效果**: 模拟强光源的辉光
- **复古效果**: 模拟旧照片效果
- **晕影效果**: 模拟镜头晕影

## 学习要点

1. **光栅化管线**: 从顶点到像素的完整流程
2. **坐标空间变换**: 世界空间 → 裁剪空间 → 屏幕空间
3. **重心坐标插值**: 顶点属性的正确插值
4. **深度缓冲**: Z-Buffer算法
5. **纹理采样**: UV坐标映射和过滤
6. **光照计算**: 物理光照模型的实现
7. **法线贴图**: 切线空间的法线变换
8. **体积渲染**: 体积数据的采样与渲染
9. **后处理效果**: 图像后期处理技术

## 控制

- `ESC` - 退出程序
- 窗口可以调整大小，渲染会自动适应

## 性能说明

这些示例都是软件渲染实现，主要用于学习目的。性能相比GPU渲染会有显著差异，但能够帮助理解渲染管线的每个步骤。

## 扩展建议

1. **阴影映射**: 实现Shadow Mapping
2. **反射**: 环境映射或屏幕空间反射
3. **抗锯齿**: MSAA或后处理抗锯齿
4. **延迟渲染**: Deferred Shading
5. **体素渲染**: 三维体素的渲染
6. **光线追踪**: 基础的光线追踪算法

这些示例为进一步学习图形学奠定了坚实的基础！
